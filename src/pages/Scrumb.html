<h1>Scrumb</h1>

<div class="content">
  <div class="buttons">
    <button class="btn btn-primary" on:click="set({addScrumb: true})">Aggiungi</button>
    <button class="btn btn-primary" on:click="exportData()">Export</button>
    <button class="btn btn-primary" on:click="importData()">Import</button>
  </div>
  <div class="blackboard">
    {#if addScrumb}
    <div class="card">
      <input class="easeIn" type="text" value="scrumb" id="new-scrumb">
      <button class="btn btn-primary easeIn" on:click="add()">Add</button>
      <button class="btn btn-primary easeIn" on:click="close()">Close</button>
    </div>
    {/if}
    {#each $scrumbs as scrumb}
    <div class="scrumb">{scrumb}</div>
    {:else}
    <h3 style="padding: 1.5rem 0 0 1.5rem;">No scrumb</h3>
    {/each}
  </div>

</div>

<script>
  export default {
    data() {
      return {
        addScrumb: false
      }
    },
    methods: {
      add() {
        const scrumbs = this.store.get()['scrumbs']
        this.store.set({scrumbs: [...scrumbs, document.querySelector('#new-scrumb').value]})
        this.set({ addScrumb: false })
        console.log('add')
      },
      close() {
        this.set({ addScrumb: false })
      },
      exportData() {
        const c = this.store.get()['scrumbs'];
        const s = 'data:text/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(c));
        const n = document.createElement('a');
        n.setAttribute('href', s);
        n.setAttribute('download', 'data.json');
        document.body.appendChild(n); // required for firefox
        n.click();
        n.remove();
      },
      importData() {
        const iEl = new HTMLInputElement;
        iEl.setAttribute('type', 'file');
        document.body.appendChild(iEl);
        iEl.click();
        console.log(iEl)
        iEl.remove();
      }
    }
  }

</script>

<style>
  .content {
    display: grid;
    grid-template-rows: 2.5rem calc(100% - 2.5rem);
    grid-template-areas: 'buttons''blackboard';
  }

  .buttons {
    grid-area: buttons;
    display: inline-flex;
    flex-direction: row-reverse;
    margin: .25rem 1rem .25rem 0;
  }

  .blackboard {
    grid-area: blackboard;
    border-top: solid 1px #00B7D6;
    margin-left: -1.5rem;
  }

  .card {
    width: 100%;
    height: 2rem;
    padding-left: .25rem;
    animation: easeIn .3s;
    background-color: #00B7D6;
  }

  .easeOut {
    animation: easeOut .3s !important;
  }

  .easeIn {
    animation: easeIn .3s;
  }

  @keyframes easeIn {
    from {
      opacity: 0;
      height: 0;
    }
    to {
      opacity: 1;
      height: 2rem;
    }
  }

  @keyframes easeOut {
    from {
      opacity: 1;
      height: 2rem;
    }
    to {
      opacity: 0;
      height: 0;
    }
}

  #new-scrumb {
    height: 1.33rem !important;
    border-radius: 1rem;
    padding-left: .5rem;
    font-size: .66rem;
  }

  .scrumb {
    width: 10rem;
    margin-top: 1rem;
    background-color: #A6D8E7;
    box-shadow: .1rem .1rem #C5E5EF;
    padding: .25rem .5rem;
    margin: 1.5rem;
  }

</style>
